{% extends "base.html" %}
{% block content %}
<div class="content">
  <div class="section stats">
    <div class="stat-card">
      <h3>{{ last_backup.ami_id if last_backup else 'N/A' }}</h3>
      <p>Last Backup AMI ID</p>
    </div>
    <div class="stat-card">
      <h3>{{ last_backup.timestamp if last_backup else 'N/A' }}</h3>
      <p>Last Backup Time</p>
    </div>
    <div class="stat-card">
      <h3>{{ backups|length }}</h3>
      <p>Total Backups</p>
    </div>
  </div>

  <div class="section">
    <h2>Backup Records</h2>
    {% if backups %}
    <table>
      <thead>
        <tr>
          <th>Instance ID</th>
          <th>Instance Name</th>
          <th>AMI ID</th>
          <th>Backup Timestamp</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for b in backups %}
        <tr>
          <td>{{ b.instance_id }}</td>
          <td>{{ b.instance_name }}</td>
          <td>{{ b.ami_id }}</td>
          <td>{{ b.timestamp }}</td>
          <td>
            <span class="status
              {% if b.status == 'Success' %}success{% elif b.status == 'Failed' %}failed{% else %}pending{% endif %}">
              {{ b.status }}
            </span>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
      <p>No backup records found.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
